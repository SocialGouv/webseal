(this["webpackJsonp@socialgouv/webseal"]=this["webpackJsonp@socialgouv/webseal"]||[]).push([[0],{189:function(e,t){},191:function(e,t){},201:function(e,t){},203:function(e,t){},228:function(e,t){},229:function(e,t){},234:function(e,t){},236:function(e,t){},243:function(e,t){},262:function(e,t){},283:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),r=c(156),s=c.n(r),l=c(157),i=c.n(l),o=c(12),j=c.n(o),b=c(18),u=c(24),d=c(38),p=c(286),O=c(288),x=c(285),m=c(160),h=c(290),f=c(158),y=c(287),g=c(159),v=c(86),S=(c(278),c(161)),C=c(85),T=c(289),k=c(291),w=c(162),E=c(1);const V=e=>{let t=!1;try{C.pki.certificateFromPem(e),t=!0}catch(c){console.log("e",c)}return t},F=n.a.forwardRef(((e,t)=>{let c=e.name,a=e.value,n=Object(S.a)(e,["name","value"]);return Object(E.jsx)(T.a.Check,Object(d.a)({inline:!0,ref:t,name:c,id:"".concat(c,"-").concat(a),label:a,type:"radio",value:a},n))})),G=({onSubmit:e})=>{const t=Object(w.a)({mode:"all",defaultValues:{pemKey:"",value:"",namespace:"",name:"",scope:"cluster"}}),c=t.register,a=t.handleSubmit,n=t.getValues,r=t.formState,s=t.setValue,l=t.trigger,i=n("scope"),o=n("pemKey"),j=r.isDirty?V(o):V("");return Object(E.jsxs)(T.a,{onSubmit:a((t=>{e(t)})),children:[Object(E.jsx)(x.a,{children:Object(E.jsxs)(m.a,{children:[Object(E.jsxs)(T.a.Label,{children:["Server public certificate (PEM key) :"," ",j?"":"\u274c Provided key is invalid"]}),Object(E.jsx)(T.a.Group,{children:Object(E.jsx)(T.a.Control,{as:"textarea",name:"pemKey",style:{marginTop:10,fontSize:"0.8rem",fontFamily:"Courier"},rows:8,onChange:e=>{s("pemKey",e.target.value),l()},ref:c({required:!0}),placeholder:"-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----",defaultValue:""})})]})}),Object(E.jsxs)(x.a,{children:[Object(E.jsx)(m.a,{xs:12,sm:3,children:Object(E.jsx)(T.a.Label,{children:"Scope :"})}),Object(E.jsxs)(m.a,{sm:9,children:[Object(E.jsx)(F,{name:"scope",value:"cluster",ref:c,onChange:e=>{s("scope",e.target.value),l()}}),Object(E.jsx)(F,{name:"scope",value:"namespace",ref:c,onChange:e=>{s("scope",e.target.value),l()}}),Object(E.jsx)(F,{name:"scope",value:"strict",ref:c,onChange:e=>{s("scope",e.target.value),l()}})]})]}),("namespace"===i||"strict"===i)&&Object(E.jsxs)(T.a.Group,{as:x.a,children:[Object(E.jsx)(T.a.Label,{column:!0,children:"Namespace :"}),Object(E.jsx)(m.a,{sm:"9",children:Object(E.jsx)(T.a.Control,{name:"namespace",ref:c({required:!0}),required:!0,type:"text",placeholder:"Namespace"})})]}),"strict"===i&&Object(E.jsxs)(T.a.Group,{as:x.a,children:[Object(E.jsx)(T.a.Label,{column:!0,children:"Secret name :"}),Object(E.jsx)(m.a,{sm:"9",children:Object(E.jsx)(T.a.Control,{name:"name",ref:c({required:!0}),type:"text",placeholder:"Secret name"})})]}),Object(E.jsx)(T.a.Group,{children:Object(E.jsx)(T.a.Control,{as:"textarea",name:"value",onChange:e=>{s("value",e.target.value),l()},style:{marginTop:10},rows:4,ref:c({required:!0}),placeholder:"Value to encrypt"})}),Object(E.jsx)(k.a,{disabled:!r.isDirty||!r.isValid,block:!0,variant:"primary",type:"submit",children:"Encrypt"})]})},I=()=>Object(E.jsxs)(p.a,{style:{padding:"2rem 1rem"},children:[Object(E.jsx)("h1",{children:"WebSeal"}),Object(E.jsx)("p",{children:"Client-side sealed-secrets generation"})]}),K=e=>Object(E.jsx)("textarea",Object(d.a)(Object(d.a)({},e),{},{style:Object(d.a)({fontSize:"0.8rem",fontFamily:"Courier",border:"1px solid #ccc",width:"100%",padding:5,height:400},e.style||{})})),L=({text:e})=>{const t=Object(a.useState)(!1),c=Object(u.a)(t,2),n=c[0],r=c[1];return Object(E.jsx)(f.CopyToClipboard,{text:e,onCopy:()=>{r(!0),setTimeout((()=>r(!1)),2e3)},children:Object(E.jsx)(y.a,{style:{marginLeft:10,cursor:"pointer",transition:"all 0.2s ease-in"},color:n?"green":"black",title:"Copy",size:16})})},q=()=>{const e=Object(a.useState)(null),t=Object(u.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(null),s=Object(u.a)(r,2),l=s[0],i=s[1];return Object(E.jsxs)(O.a,{children:[Object(E.jsx)(I,{}),Object(E.jsx)(x.a,{children:Object(E.jsxs)(m.a,{xs:12,children:[Object(E.jsx)(h.a,{children:Object(E.jsx)(h.a.Body,{children:Object(E.jsx)(G,{onSubmit:e=>{console.log("onSubmit2",e),n(""),i(""),Object(v.encryptValue)(e).then(function(){var t=Object(b.a)(j.a.mark((function t(c){var a,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(c),t.next=3,Object(v.getSealedSecret)({pemKey:e.pemKey,namespace:e.namespace,name:e.name,scope:e.scope,values:{VALUE:e.value}});case 3:a=t.sent,r=g.a.dump(a),i(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(console.log)}})})}),c&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(h.a,{style:{marginTop:10},children:Object(E.jsxs)(h.a.Body,{children:[Object(E.jsxs)(h.a.Title,{children:["Encrypted",Object(E.jsx)(L,{text:c})]}),Object(E.jsx)(K,{defaultValue:c,style:{height:200}})]})}),Object(E.jsx)(h.a,{style:{marginTop:10},children:Object(E.jsxs)(h.a.Body,{children:[Object(E.jsxs)(h.a.Title,{children:["SealedSecret ",Object(E.jsx)(L,{text:l})]}),Object(E.jsx)(K,{defaultValue:l})]})})]})]})})]})};function B(){return Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(q,{})})}const N=document.getElementById("root");s.a.render(Object(E.jsxs)(a.StrictMode,{children:[Object(E.jsx)(B,{}),Object(E.jsx)(i.a,{color:"green",target:"_blank",href:"https://github.com/SocialGouv/webseal",children:"Fork me on GitHub"})]}),N)},59:function(e,t){}},[[283,1,2]]]);
//# sourceMappingURL=main.3e53d21d.chunk.js.map